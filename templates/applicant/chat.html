{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="applicant-dashboard">
  <header class="main-header">
    {% include "applicant/applicant_header.html" %}
  </header>

  <section class="search-filter-section">
    <h2 class="ms-3">Chat with {{ organization.organization_name }}</h2>
  </section>

  <div class="dashboard-grid">
    {% include "applicant/apl_sidebar.html" %}

    <div class="chat-wrapper">
      <div class="chat-list">
        <ul>
          <li class="chat-active"><strong>{{ organization.organization_name }}</strong> – {{ job.title }}</li>
        </ul>
      </div>

      <div class="chat-box">
        <div class="chat-header">
          <strong>Chat with {{ organization.organization_name }} – {{ job.title }}</strong>
        </div>

        <div class="chat-messages">
          {% for msg in messages %}
            <div class="chat-message {% if msg.sender == applicant %}you{% else %}company{% endif %}">
              <span>{{ msg.content }}</span>
              <small>{{ msg.timestamp|date:"H:i" }}</small>
            </div>
          {% endfor %}
        </div>

        <form method="POST" class="chat-form">
          {% csrf_token %}
          <input type="text" name="message" placeholder="Type your message..." class="chat-input" required>
          <button type="submit" class="chat-send">Send</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
