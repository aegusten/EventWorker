{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="org-wrapper">
  <div class="org-dashboard-layout">
    {% include "organization/org_sidebar.html" %}
    <section class="main-content">
      {% include "organization/org_header.html" %}

      <div class="container mt-4">
        <h2 class="mb-4 text-primary">Applicants for "{{ job.title }}"</h2>
        <a href="{% url 'organization_dashboard' %}" class="back-btn mb-3">← Back to Dashboard</a>

        {% if applicants %}
        <div class="applicant-cards">
          {% for app in applicants %}
          <div class="applicant-card">
            <div class="header">{{ app.applicant.full_name }}</div>
            <div class="details">
              <div><strong>Email:</strong> {{ app.applicant.email }}</div>
              <div><strong>Phone:</strong> {{ app.applicant.phone_number|default:"—" }}</div>
              <div><strong>Age:</strong> {{ app.applicant.age|default:"—" }}</div>
              <div><strong>Skills:</strong> {{ app.applicant.skills|default:"—" }}</div>
              <div><strong>Location:</strong> {{ app.applicant.city|default:"—" }}</div>
              <div><strong>Status:</strong> <span class="badge bg-{{ app.status|yesno:'success,warning,danger' }}">{{ app.status }}</span></div>
            </div>
            <div class="action-buttons">
              <a href="{% url 'accept_applicant' app.id %}" class="accept-btn">Accept</a>
              <a href="{% url 'reject_applicant' app.id %}" class="reject-btn">Reject</a>
              {% if app.applicant.cv %}
              <a href="{{ app.applicant.cv.url }}" class="cv-btn" target="_blank">View CV</a>
              {% else %}
              <span>No CV</span>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>

        <!-- Pagination -->
        <div class="custom-pagination">
          <ul>
            <li class="active"><span>1</span></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">Next</a></li>
          </ul>
        </div>

        {% else %}
        <div class="alert alert-info mt-3">No applicants have applied for this job yet.</div>
        {% endif %}
      </div>
    </section>
  </div>
</div>
{% endblock %}
